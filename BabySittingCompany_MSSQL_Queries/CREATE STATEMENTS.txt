




-- IF NOT EXSISTS COMMAND DOES NOT WORK HERE ON MSSQL BUT DOES WORK ON MSSQL
--CREATE DATABASE baby_and_kid_care_company;
USE baby_and_kid_care_company;
CREATE TABLE COMPANY(
BRANCH_ID INT NOT NULL,
BRANCH_NAME VARCHAR(255) NOT NULL,
CONSTRAINT pk_company PRIMARY KEY(BRANCH_ID)
);

CREATE TABLE BABY_SITTER (
SSN INT, 
FULL_NAME VARCHAR(255) NOT NULL,
DATE_OF_BIRTH DATE,
NATIONALITY VARCHAR(50),
GENDER VARCHAR(20),
AVAILABLE_DAY_OF_WEEK VARCHAR(20) NOT NULL,
AVAILABLE_START_TIME TIME NOT NULL,
AVAILABLE_END_TIME TIME NOT NULL,
OTHER_OCCUPATION VARCHAR(255),
HIGHEST_EDUCATION_DEGREE VARCHAR(255),
HOURLY_PAY_RATE DECIMAL(38,2) NOT NULL,
BRANCH_ID INT NOT NULL,

CONSTRAINT pk_baby_sitter PRIMARY KEY (SSN),
CONSTRAINT fk_baby_sitter FOREIGN KEY (BRANCH_ID) REFERENCES COMPANY(BRANCH_ID) ON DELETE CASCADE
);

CREATE TABLE BABY_SITTER_LANGUAGE (
SSN INT,
LANGUAGE_SPOKEN VARCHAR(50),
CONSTRAINT pk_baby_sitter_language PRIMARY KEY (SSN, LANGUAGE_SPOKEN),
CONSTRAINT fk_baby_sitter_language FOREIGN KEY (SSN) REFERENCES BABY_SITTER(SSN) ON DELETE CASCADE
);

CREATE TABLE BABY_SITTER_SKILL (
SSN INT,
SKILL VARCHAR(255),
CONSTRAINT pk_baby_sitter_skill PRIMARY KEY (SSN, SKILL),
CONSTRAINT fk_baby_sitter_skill FOREIGN KEY (SSN) REFERENCES BABY_SITTER(SSN) ON DELETE CASCADE
);


CREATE TABLE FAMILY (
FAMILY_ID INT,
FULL_NAME VARCHAR(255) NOT NULL,
MARITAL_STATUS VARCHAR(20),
STREET VARCHAR(255),
CITY VARCHAR(255),
STATE VARCHAR(255),
ZIP VARCHAR(255),
BRANCH_ID INT,
CONSTRAINT pk_family PRIMARY KEY(FAMILY_ID),
CONSTRAINT fk_family FOREIGN KEY(BRANCH_ID) REFERENCES COMPANY(BRANCH_ID) ON DELETE CASCADE
);

CREATE TABLE FAMILY_EMAIL (
FAMILY_ID INT,
EMAIL VARCHAR(255),
CONSTRAINT uk_family_email UNIQUE(EMAIL),
CONSTRAINT pk_family_email PRIMARY KEY (FAMILY_ID, EMAIL),
CONSTRAINT fk_family_email FOREIGN KEY (FAMILY_ID) REFERENCES FAMILY(FAMILY_ID) ON DELETE CASCADE
);


CREATE TABLE FAMILY_MOBILE_NUMBER (
FAMILY_ID INT,
MOBILE_NUMBER VARCHAR(10),
CONSTRAINT uk_family_mobile_number UNIQUE(MOBILE_NUMBER),
CONSTRAINT pk_family_mobile_number PRIMARY KEY (FAMILY_ID, MOBILE_NUMBER),
CONSTRAINT fk_family_mobile_number FOREIGN KEY (FAMILY_ID) REFERENCES FAMILY(FAMILY_ID) ON DELETE CASCADE
);

CREATE TABLE CONTRACT(
CONTRACT_ID INT,
START_DATE DATE,
END_DATE DATE,
ACTIVITY VARCHAR(255),
SSN INT,
CONSTRAINT pk_contract PRIMARY KEY (CONTRACT_ID),
CONSTRAINT fk_contract FOREIGN KEY (SSN) REFERENCES BABY_SITTER (SSN) ON DELETE CASCADE
);

CREATE TABLE CONTRACT_SERVICES (
CONTRACT_ID INT,
SERVICE_EXPECTED VARCHAR(255),
CONSTRAINT pk_contract_service PRIMARY KEY (CONTRACT_ID, SERVICE_EXPECTED),
CONSTRAINT fk_contract_service2 FOREIGN KEY (CONTRACT_ID) REFERENCES CONTRACT(CONTRACT_ID) ON DELETE CASCADE
);

CREATE TABLE CHILD(
FAMILY_ID INT,
CHILD_ID INT,
FULL_NAME VARCHAR(255) NOT NULL,
DATE_OF_BIRTH DATE,
GENDER VARCHAR(20),
IS_DISABLE VARCHAR(50) NOT NULL,
MONTHLY_FEE DECIMAL(38,2),
CONTRACT_ID INT,
CONSTRAINT pk_child PRIMARY KEY (FAMILY_ID, CHILD_ID),
CONSTRAINT fk_child_1 FOREIGN KEY (FAMILY_ID) REFERENCES FAMILY(FAMILY_ID) ON DELETE CASCADE,
CONSTRAINT fk_child_2 FOREIGN KEY (CONTRACT_ID) REFERENCES CONTRACT(CONTRACT_ID)
);

CREATE TABLE CHILD_LANGUAGES_SPOKEN(
FAMILY_ID INT,
CHILD_ID INT,
LANGUAGE_SPOKEN VARCHAR(50),
CONSTRAINT pk_child_languages_spoken PRIMARY KEY (FAMILY_ID, CHILD_ID, LANGUAGE_SPOKEN),
CONSTRAINT fk_child_languages_spoken FOREIGN KEY (FAMILY_ID, CHILD_ID) REFERENCES CHILD(FAMILY_ID, CHILD_ID) ON DELETE CASCADE
);

